const e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];class n{grid;winner;constructor(){this.grid=i(),this.winner=null}get grid(){return this.grid}get winner(){return this.winner}makeMove(e,n){r(this,e),this.grid[e]=n,this.winner=t(this.grid)}circle(e){this.makeMove(e,0)}cross(e){this.makeMove(e,1)}}let r=function(e,n,r){if(null!==e.winner)throw new Error("There is already a winner!");if(0>n||n>8)throw new RangeError("Index is not between 0 and 8.");if(null!==e.grid[n])throw new Error("This field is already taken.")},t=function(n){return e.forEach((function(e){if(null!==n[e[0]]&&n[e[0]]===n[e[1]]&&n[e[0]]===n[e[2]])return n[e[0]]})),null},i=function(){let e=[];for(let n=0,r=9;n<=r;n++)e[n]=null;return e};const l={message:"game-message",restart:"game-restart",grid:"game-grid"},s="success",o="error",a="invisible",c="visible",u="circle",d="cross",g=document.getElementById(l.restart),m=document.getElementById(l.grid),f=new class{getMove(e,n){}};let h=new n,w=function(e,n=!1){let r=document.getElementById(l.error);r.innerHTML=e,r.className=`${c} ${o}`,n||setTimeout((function(){r.className=a}),2e3)},v=function(e){if(g.disabled=!1,null!==h.winner)return!1;return null!==y(e)?(function(e){let n=document.getElementById(l.error);n.innerHTML=e,n.className=`${c} ${s}`}("Congratulations! You've managed to cheat &1F609;"),!1):null!==y(f.getMove(h,0))?(w("I'm sorry, you've lost ... &1F642;"),!1):void 0},y=function(e){if(null!==h.winner)return h.winner;try{h.makeMove(e,current_player),document.getElementById(e.toString()).className=0===current_player?u:d}catch(e){return w(e.message),null}},E=function(){h=new n,g.disabled=!0;for(let e=0,n=m.children.length;e<n;e++)m.children[e].className=""};window.onload=function(){g.addEventListener("click",E),m.addEventListener("click",(function(e){e.target.matches("li")&&v(parseInt(e.target.id))}))};
